@model AppData.Models.ShoesDetails
@{
    ViewData["Title"] = "Details";
}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.3/assets/css/docs.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="css/owl.carousel.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="~/css/detail.css">
    <link href="https://unpkg.com/tailwindcss@0.3.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css'>
    <link rel="icon" href="img/mdb-favicon.ico" type="image/x-icon" />
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <!-- Google Fonts Roboto -->
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" />
    <title>Detail</title>
    <style>
        .product-small-img img {
            height: 92px;
            margin: 10px 0;
            cursor: pointer;
            display: block;
            opacity: .6;
            border-radius: 10%;
        }

            .product-small-img img:hover {
                opacity: 1;
            }

        .product-small-img {
            float: left;
            margin-left: 27%;
        }

        .product {
            position: relative;
        }

        .img-container img {
            height: 500px;
            border-radius: 2%;
        }

        .img-container {
            float: right;
            padding: 10px;
        }

        .delete-button {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgb(20, 20, 20);
            border: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.164);
            cursor: pointer;
            transition-duration: 0.3s;
            overflow: hidden;
            position: relative;
            top: -70px;
            margin-left: 70%;
        }

        .delete-svgIcon {
            width: 15px;
            transition-duration: 0.3s;
        }

            .delete-svgIcon path {
                fill: white;
            }

        .delete-button-next {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: rgb(20, 20, 20);
            border: none;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.164);
            cursor: pointer;
            transition-duration: 0.3s;
            overflow: hidden;
            position: relative;
            top: -110px;
            margin-left: 83%;
        }

        .delete-svgIcon-next {
            width: 15px;
            transition-duration: 0.3s;
        }

            .delete-svgIcon-next path {
                fill: white;
            }
    </style>
</head>

<body>
    <div class="container mt-4 d-flex justify-content-center" style="padding-top: 45px;">
        <div class="row g-0">
            <!-- src="image/anh11.png" -->
            <div class="col-12 col-sm-12 col-md-7 col-lg-7">
                <div class="product">
                    <div class="product-small-img d-none d-sm-none d-md-none d-lg-none d-xl-block">
                        <img src="@Url.Content("~/image/" + ViewBag.ImageGolden1)" alt="Product Image" class="img-fluid" style="width: 100%;" onmouseover="hoverThumbnail(this)" onmouseout="resetThumbnailOpacity(this)">
                        <img src="@Url.Content("~/image/" + ViewBag.ImageGolden2)" alt="Product Image" class="img-fluid" style="width: 100%;" onmouseover="hoverThumbnail(this)" onmouseout="resetThumbnailOpacity(this)">
                        <img src="@Url.Content("~/image/" + ViewBag.ImageGolden3)" alt="Product Image" class="img-fluid" style="width: 100%;" onmouseover="hoverThumbnail(this)" onmouseout="resetThumbnailOpacity(this)">
                        <img src="@Url.Content("~/image/" + ViewBag.ImageGolden4)" alt="Product Image" class="img-fluid" style="width: 100%;" onmouseover="hoverThumbnail(this)" onmouseout="resetThumbnailOpacity(this)">
                    </div> 
                    <div class="img-container">
                        <img id="imageBox" src="@Url.Content("~/image/" + ViewBag.ImageGolden1)" alt="Product Image" class="img-fluid" style="width: 100%;">
                        <button class="delete-button" onclick="previousImage()">
                            <svg class="delete-svgIcon" viewBox="0 0 20 20">
                                <path fill="none" d="M8.388,10.049l4.76-4.873c0.303-0.31,0.297-0.804-0.012-1.105c-0.309-0.304-0.803-0.293-1.105,0.012L6.726,9.516c-0.303,0.31-0.296,0.805,0.012,1.105l5.433,5.307c0.152,0.148,0.35,0.223,0.547,0.223c0.203,0,0.406-0.08,0.559-0.236c0.303-0.309,0.295-0.803-0.012-1.104L8.388,10.049z"></path>
                            </svg>
                        </button>
                        <button class="delete-button-next" onclick="nextImage()">
                            <svg class="delete-svgIcon-next" viewBox="0 0 20 20">
                                <path fill="none" d="M11.611,10.049l-4.76-4.873c-0.303-0.31-0.297-0.804,0.012-1.105c0.309-0.304,0.803-0.293,1.105,0.012l5.306,5.433c0.304,0.31,0.296,0.805-0.012,1.105L7.83,15.928c-0.152,0.148-0.35,0.223-0.547,0.223c-0.203,0-0.406-0.08-0.559-0.236c-0.303-0.309-0.295-0.803-0.012-1.104L11.611,10.049z"></path>
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <script>
                var imageUrls = [
                    "@Url.Content("~/image/" + ViewBag.ImageGolden1)",
                    "@Url.Content("~/image/" + ViewBag.ImageGolden2)",
                    "@Url.Content("~/image/" + ViewBag.ImageGolden3)",
                    "@Url.Content("~/image/" + ViewBag.ImageGolden4)"
                ];

                var currentImageIndex = 0;

                function nextImage() {
                    currentImageIndex = (currentImageIndex + 1) % imageUrls.length;
                    updateImage();
                    updateThumbnails();
                }

                function previousImage() {
                    currentImageIndex = (currentImageIndex - 1 + imageUrls.length) % imageUrls.length;
                    updateImage();
                    updateThumbnails();
                }

                function updateImage() {
                    var fullImg = document.getElementById("imageBox");
                    fullImg.src = imageUrls[currentImageIndex];
                }

                function updateThumbnails() {
                    var thumbnails = document.querySelectorAll(".product-small-img img");
                    for (var i = 0; i < thumbnails.length; i++) {
                        if (i === currentImageIndex) {
                            thumbnails[i].style.opacity = 1;
                        } else {
                            thumbnails[i].style.opacity = 0.6;
                        }
                    }
                }

                function hoverThumbnail(thumbnail) {
                    var fullImg = document.getElementById("imageBox");
                    var index = Array.from(thumbnail.parentNode.children).indexOf(thumbnail);
                    fullImg.src = imageUrls[index];
                    thumbnail.style.opacity = 1;
                }

                function resetThumbnailOpacity(thumbnail) {
                    var index = Array.from(thumbnail.parentNode.children).indexOf(thumbnail);
                    if (index !== currentImageIndex) {
                        thumbnail.style.opacity = 0.6;
                    }
                }
                updateThumbnails();
            </script>
            <!-- src="image/video1.mp4" -->
            <div class="col-12 col-sm-12 col-md-5 col-lg-5" style="margin-top:-6%;">
                <div class="product p-6 p-md-5">
                    <div class="mt-4 mb-3">
                        <span class="text-uppercase text-muted brand" style="font-size: 11px;">
                            Sustainable
                            Materials
                        </span>
                        <h5 class="text-uppercase" style="padding-top: 5px;">@ViewBag.nameProduct</h5>
                        <!-- Nike SuperRep Cycle 2 Next Nature -->
                        <!-- Indoor Cycling Shoes -->
                        <p class="line1" style="padding-top: 5px; font-weight:bold;">Kiểu dáng: @ViewBag.styleProduct</p>
                        <p style="font-size: 14px; padding-top: 5px; font-weight:bold;">Giá: @Model.Price.ToString("N0")đ</p>
                        <p style="font-size: 14px; padding-top: 5px;">Sản phẩm có sẵn: <span style="font-weight:bold;" id="quantity"></span></p>
                        <p style="font-size: 14px; padding-top: 5px;">Chiều dài chân phù hợp: <span style="font-weight:bold;" id="result"></span></p>
                    </div>
                    <h6 class="text-uppercase" style="font-size: 12px;">Select Size</h6>
                    <div class="cart mt-4 align-items-center">
                        <form method="post" action="@Url.Action("AddToCart", "Cart", new { id = Model.ShoesDetailsId })">
                            <div class="label1" style="padding-top: 5px;">
                                <label class="radio">
                                    <input type="radio" name="size" value="34" checked> <span class="span1">34</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="35"> <span class="span1">35</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="36"> <span class="span1">36</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="37"> <span class="span2">37</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="38"> <span class="span2">38</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="39"> <span class="span2">39</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="40"> <span class="span3">40</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="41"> <span class="span3">41</span>
                                </label>
                                <label class="radio">
                                    <input type="radio" name="size" value="42"> <span class="span3">42</span>
                                </label>
                            </div>
                            <button type="submit" id="addToCartButton" class="btn btn-danger text mr-2 px-4" style="width: 79%; border-radius: 20px; color: white; margin-top:10px;">Add to cart</button>
                        </form>
                        <script>
                            document.addEventListener("DOMContentLoaded", function () {
                                // Lấy danh sách radio button theo tên "size"
                                const sizeRadios = document.getElementsByName("size");
                                // Lựa chọn size mặc định (ví dụ: size đầu tiên)
                                const defaultSize = sizeRadios[0].value;

                                // Gọi hàm để cập nhật thông tin số lượng và chiều dài chân ngay khi trang được load
                                updateQuantityAndFootLength(defaultSize);

                                // Lắng nghe sự kiện click trên radio button
                                for (let i = 0; i < sizeRadios.length; i++) {
                                    sizeRadios[i].addEventListener("click", function () {
                                        const selectedSize = this.value;
                                        // Gọi hàm để cập nhật thông tin số lượng và chiều dài chân dựa trên size đã chọn
                                        updateQuantityAndFootLength(selectedSize);
                                    });
                                }
                            });

                            function updateQuantityAndFootLength(size) {
                                const quantitySpan = document.getElementById('quantity');
                                const addToCartButton = document.getElementById('addToCartButton');

                                // Gửi yêu cầu Ajax để lấy số lượng và chiều dài chân dựa trên kích thước và ShoesDetailsId
                                $.get('@Url.Action("GetQuantityForSize", "Home")', { shoesDetailsId: "@Model.ShoesDetailsId", sizeForm: size }, function (data) {
                                    // Cập nhật nội dung của quantitySpan bằng số lượng tồn từ phản hồi.
                                    quantitySpan.textContent = data.quantity;
                                    const soluong = data.quantity;
                                    if (soluong <= 0) {
                                        addToCartButton.disabled = true;
                                        addToCartButton.textContent = "Hết hàng";
                                    } else {
                                        addToCartButton.disabled = false;
                                        addToCartButton.textContent = "Add To Cart";
                                    }

                                    const result = document.getElementById("result");
                                    result.textContent = getFootLength(size) + " cm";
                                });
                            }

                            function getFootLength(size) {
                                const footLengths = {
                                    "34": 21.5,
                                    "35": 22,
                                    "36": 23,
                                    "37": 23.5,
                                    "38": 24,
                                    "39": 25,
                                    "40": 25.5,
                                    "41": 26,
                                    "42": 27,
                                };
                                return footLengths[size] || "Không rõ";
                            }
                        </script>
                    </div>
                    <div class="chu1">
                        <hr style="width:77%;" />
                        <h5 onclick="toggleDescription()" style="width:77%;">Thông tin chi tiết sản phẩm <img src="~/image/icons8-chevron-down-11.png" style="float:right; padding-top:5px;" id="imgMoTa" /></h5>
                        <p class="about" style="font-size: 13px; margin-top: 5px; text-align: justify; display:none; width:77%;" id="description">
                       
                            
                            <strong>Mô tả:</strong> @Model.Description<br />
                          
                            <div class="additional-info" >
                                <strong>🎀 Đặc tính nổi bật:</strong>
                                <ul>
                                    <li>Kháng nước nhẹ khi đi mưa</li>
                                    <li>Đế và lót được khâu toàn bộ tránh bung keo</li>
                                    <li>Nhiều phiên bản màu sắc</li>
                                    <li>Thích hợp sử dụng với nhiều hoạt động thể thao, vui chơi,...</li>
                                </ul>
                                <strong>🎀 Hướng dẫn sử dụng:</strong>
                                <ul>
                                    <li>Bảo quản nơi khô ráo tránh ẩm mốc sản phẩm</li>
                                    <li>Không giặt giày với nước nhiệt độ cao</li>
                                    <li>Khuyến cáo sử dụng thêm sản phẩm vệ sinh giày của shop để tăng tuổi thọ cho sản phẩm</li>
                                </ul>
                                <strong>🎀 Cách tìm mua sản phẩm @ViewBag.nameProduct:</strong> Vào ô tìm kiếm của Shop gõ từ khóa "@ViewBag.nameProduct". <br />
                                <strong>🎀 Hotline:</strong> 0766900008
                            </div>
                        </p>
                    </div>
                    <script>
                        function toggleDescription() {
                            var description = document.getElementById("description");
                            var img = document.getElementById("imgMoTa");
                            if (description.style.display === "none") {
                                description.style.display = "block";
                                img.src = "/image/icons8-chevron-up-11.png";
                            } else {
                                description.style.display = "none";
                                img.src = "/image/icons8-chevron-down-11.png";
                            }
                        }
                    </script>
                </div>
            </div>
        </div>
    </div>
    <div class="shell">
        <div class="container">
            <div class="tieude1" style="padding-bottom: 8px;">
                <h3>Có thể bạn quan tâm</h3>
            </div>
            <div class="row">
                <div class="col-md-3">
                    <div class="wsk-cp-product">
                        <div class="wsk-cp-img">
                            <img src="~/image/anh26.png" alt="Product" class="img-responsive" />
                        </div>
                        <div class="wsk-cp-text">
                            <div class="category">
                                <span>View</span>
                            </div>
                            <div class="title-product">
                                <h3>Nike ZoomX Vaporfly</h3>
                            </div>
                            <div class="description-prod">
                                <p>Men's Road Racing Shoesk NEXT% 2</p>
                            </div>
                            <div class="card-footer" style="padding-left: 38px;">
                                <div class="wcf-left">
                                    <span class="price" style="color: red; font-size: 16px;">
                                        5,617,649đ <del style="color: black; font-size: 16px;"> 6.408.000đ</del>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="wsk-cp-product">
                        <div class="wsk-cp-img">
                            <img src="~/image/anh27.png" alt="Product" class="img-responsive" />
                        </div>
                        <div class="wsk-cp-text">
                            <div class="category">
                                <span>View</span>
                            </div>
                            <div class="title-product">
                                <h3>Nike Pegasus Trail 3</h3>
                            </div>
                            <div class="description-prod">
                                <p>Men's Trail-Running Shoes</p>
                            </div>
                            <div class="card-footer" style="padding-left: 38px;">
                                <div class="wcf-left">
                                    <span class="price" style="color: red; font-size: 16px;">
                                        3,829,000đ <del style="color: black; font-size: 16px;"> 4.205.000đ</del>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="wsk-cp-product">
                        <div class="wsk-cp-img">
                            <img src="~/image/anh28.png" alt="Product" class="img-responsive" />
                        </div>
                        <div class="wsk-cp-text">
                            <div class="category">
                                <span>View</span>
                            </div>
                            <div class="title-product">
                                <h3>Nike Heritage</h3>
                            </div>
                            <div class="description-prod">
                                <p>Drawstring Bag (13L)</p>
                            </div>
                            <div class="card-footer" style="padding-left: 50px;">
                                <div class="wcf-left">
                                    <span class="price" style="color: red; font-size: 16px;">
                                        509,000đ <del style="color: black; font-size: 16px;"> 699.000đ</del>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="wsk-cp-product">
                        <div class="wsk-cp-img">
                            <img src="~/image/anh29.png" alt="Product" class="img-responsive" />
                        </div>
                        <div class="wsk-cp-text">
                            <div class="category">
                                <span>View</span>
                            </div>
                            <div class="title-product">
                                <h3>Nike React Infinity Run</h3>
                            </div>
                            <div class="description-prod">
                                <p>Men's Road Running Shoes</p>
                            </div>
                            <div class="card-footer" style="padding-left: 38px;">
                                <div class="wcf-left">
                                    <span class="price" style="color: red; font-size: 16px;">
                                        3,747,649đ <del style="color: black; font-size: 16px;"> 4.409.000đ</del>
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <footer class="footer" style="margin-top: 200px;">
        <!-- Copyright -->
        <div class="text-center p-3" style="background-color: white; color: white;">
            © 2022
            <a class="text-white" href="#" style="text-decoration: none;">
                Nike, Inc. All Rights
                Reserved - PH24890
            </a>
        </div>
        <!-- Copyright -->
    </footer>
    <!-- <footer class="footer">My footer</footer> -->
</body>

</html>